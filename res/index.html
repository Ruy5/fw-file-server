<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/file/css?filename=hls.js"></script>
    <title>VideoPlayer</title>
</head>
<body>
<video style="width: 800px; height: 500;" id="video" controls></video>
<script>

    const video = document.getElementById("video");
    const timevars = window.location.search.slice(1).split("&").find(o => o.startsWith("starttime"))
    const startTime = timevars ? Number(timevars.split("=")[1]) : 0;
      const videoSrc = "/video/m3u8?filename=5月11日.m3u8";
       // const videoSrc = "http://localhost:8080/video/m3u8?filepath=D:/program/m3u8-demo/src/main/resources/Captures/m3u8s&filename=5月11日.m3u8";
       // 设置你希望开始播放的时间（以秒为单位）

      if (video.canPlayType("application/vnd.apple.mpegurl")) {
          video.src = videoSrc;
          video.addEventListener('loadedmetadata', () => {
              video.currentTime = startTime;
              video.play();
          });
      } else if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(videoSrc);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, function () {
              video.currentTime = startTime;
              video.play();
          });
      }
</script>
</body>
</html>